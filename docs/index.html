<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checks for Exclusion Criteria in Online Data • excluder</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Checks for Exclusion Criteria in Online Data">
<meta property="og:description" content="Data that are collected through online sources may require
            excluding data because of IP address duplication, geolocation, 
            or completion duration.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">excluder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jstevens5/excluder/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="excluder" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#excluder" class="anchor"></a>excluder</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of excluder is to facilitate checking for, marking, and excluding rows of data frames for common exclusion criteria. This package applies to data collected from <a href="https://qualtrics.com">Qualtrics</a> surveys, and default column names come from importing data with the <a href="https://docs.ropensci.org/qualtRics/"><code>{qualtRics}</code></a> package.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of excluder <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"jstevens5/excluder"</span><span class="op">)</span></code></pre></div>
</div>
<div id="verbs" class="section level2">
<h2 class="hasAnchor">
<a href="#verbs" class="anchor"></a>Verbs</h2>
<p>This package provides three primary verbs:</p>
<ul>
<li>
<code>check</code> functions search for the exclusion criteria and outputs a message with the number of rows meeting the criteria and a data frame of the rows meeting the criteria. This is useful for viewing the potential exclusions.</li>
<li>
<code>mark</code> functions add a new column to the data frame that labels the rows meeting the exclusion criteria. This is useful to label the potential exclusions for future processing.</li>
<li>
<code>exclude</code> functions remove rows meeting the exclusion criteria. This is often the last step to complete after checking and/or marking the rows to ensure the exclusions are correct.</li>
</ul>
</div>
<div id="exclusion-types" class="section level2">
<h2 class="hasAnchor">
<a href="#exclusion-types" class="anchor"></a>Exclusion types</h2>
<p>This package provides six types of exclusions based on Qualtrics metadata. If you have ideas for other metadata exclusions, please submit them as <a href="https://github.com/jstevens5/excluder/issues">issues</a>. Note, the intent of this package is not to develop functions for excluding rows based on survey-specific data but on general, frequently used metadata.</p>
<ul>
<li>
<code>duplicates</code> works with rows that have duplicate IP addresses and/or locations (latitude/longitude).</li>
<li>
<code>duration</code> works with rows whose survey completion time is too short and/or too long.</li>
<li>
<code>ip</code> works with rows whose IP addresses are not found in the specified country (note: this exclusion type requires an internet connection to download the country’s IP ranges).</li>
<li>
<code>location</code> works with rows whose latitude and longitude are noe found in the United States.</li>
<li>
<code>preview</code> works with rows that are survey previews.</li>
<li>
<code>progress</code> works with rows in which the survey was not complete.</li>
<li>
<code>resolution</code> works with rows whose screen resolution is not acceptable.</li>
</ul>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The verbs and exclusion types combine with <code>_</code> to create the functions, such as <code>check_duplicates</code>, <code>mark_duration</code>, and <code>exclude_ip</code>. Multiple functions can be changed together using the <a href=""><code>{magrittr}</code></a> pipe <code><a href="reference/%&gt;%.html">%&gt;%</a></code>.</p>
<div id="checking" class="section level3">
<h3 class="hasAnchor">
<a href="#checking" class="anchor"></a>Checking</h3>
<p>The <code>check_*()</code> functions output messages about the number of rows that meet the exclusion criteria.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jstevens5/excluder">excluder</a></span><span class="op">)</span>
<span class="co"># Check for preview rows</span>
<span class="va">qualtrics_text</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/check_preview.html">check_preview</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; 2 out of 100 rows were collected as previews. It is highly recommended to exclude these rows before further checking.</span>
<span class="co">#&gt; # A tibble: 2 x 16</span>
<span class="co">#&gt; # Rowwise: </span>
<span class="co">#&gt;   StartDate           EndDate             Status IPAddress Progress</span>
<span class="co">#&gt;   &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt; 1 2020-12-11 12:06:52 2020-12-11 12:10:30 Surve… &lt;NA&gt;           100</span>
<span class="co">#&gt; 2 2020-12-11 12:06:43 2020-12-11 12:11:27 Surve… &lt;NA&gt;           100</span>
<span class="co">#&gt; # … with 11 more variables: `Duration (in seconds)` &lt;dbl&gt;, Finished &lt;lgl&gt;,</span>
<span class="co">#&gt; #   RecordedDate &lt;dttm&gt;, ResponseId &lt;chr&gt;, LocationLatitude &lt;dbl&gt;,</span>
<span class="co">#&gt; #   LocationLongitude &lt;dbl&gt;, UserLanguage &lt;chr&gt;, Browser &lt;chr&gt;, Version &lt;chr&gt;,</span>
<span class="co">#&gt; #   `Operating System` &lt;chr&gt;, Resolution &lt;chr&gt;</span></code></pre></div>
<p>Because checks return only the rows meeting the criteria, they should not be connected via pipes unless you want to subset the second check criterion within the rows that meeting the first criterion.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Check for rows with incomplete data then rows with durations less than 100 seconds</span>
<span class="va">qualtrics_text</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/check_progress.html">check_progress</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; 6 out of 100 rows did not complete the study.</span>
<span class="co">#&gt; # A tibble: 6 x 16</span>
<span class="co">#&gt; # Rowwise: </span>
<span class="co">#&gt;   StartDate           EndDate             Status IPAddress Progress</span>
<span class="co">#&gt;   &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt; 1 2020-12-17 15:40:53 2020-12-17 15:43:25 IP Ad… 22.51.31…       99</span>
<span class="co">#&gt; 2 2020-12-17 15:40:56 2020-12-17 15:46:23 IP Ad… 71.146.1…        1</span>
<span class="co">#&gt; 3 2020-12-17 15:41:52 2020-12-17 15:46:37 IP Ad… 15.223.0…       13</span>
<span class="co">#&gt; 4 2020-12-17 15:41:27 2020-12-17 15:46:45 IP Ad… 19.127.8…       48</span>
<span class="co">#&gt; 5 2020-12-17 15:49:42 2020-12-17 15:51:50 IP Ad… 40.146.2…        5</span>
<span class="co">#&gt; 6 2020-12-17 15:49:28 2020-12-17 15:55:06 IP Ad… 2.246.67…       44</span>
<span class="co">#&gt; # … with 11 more variables: `Duration (in seconds)` &lt;dbl&gt;, Finished &lt;lgl&gt;,</span>
<span class="co">#&gt; #   RecordedDate &lt;dttm&gt;, ResponseId &lt;chr&gt;, LocationLatitude &lt;dbl&gt;,</span>
<span class="co">#&gt; #   LocationLongitude &lt;dbl&gt;, UserLanguage &lt;chr&gt;, Browser &lt;chr&gt;, Version &lt;chr&gt;,</span>
<span class="co">#&gt; #   `Operating System` &lt;chr&gt;, Resolution &lt;chr&gt;</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">qualtrics_text</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/check_duration.html">check_duration</a></span><span class="op">(</span>min_duration <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="co">#&gt; 4 out of 100 rows took less time than the minimum duration of 100 seconds.</span>
<span class="co">#&gt; # A tibble: 4 x 16</span>
<span class="co">#&gt; # Rowwise: </span>
<span class="co">#&gt;   StartDate           EndDate             Status IPAddress Progress</span>
<span class="co">#&gt;   &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt; 1 2020-12-11 16:59:08 2020-12-11 17:02:05 IP Ad… 84.56.18…      100</span>
<span class="co">#&gt; 2 2020-12-17 15:41:52 2020-12-17 15:46:37 IP Ad… 15.223.0…       13</span>
<span class="co">#&gt; 3 2020-12-17 15:41:27 2020-12-17 15:46:45 IP Ad… 19.127.8…       48</span>
<span class="co">#&gt; 4 2020-12-17 15:46:46 2020-12-17 15:49:02 IP Ad… 21.134.2…      100</span>
<span class="co">#&gt; # … with 11 more variables: `Duration (in seconds)` &lt;dbl&gt;, Finished &lt;lgl&gt;,</span>
<span class="co">#&gt; #   RecordedDate &lt;dttm&gt;, ResponseId &lt;chr&gt;, LocationLatitude &lt;dbl&gt;,</span>
<span class="co">#&gt; #   LocationLongitude &lt;dbl&gt;, UserLanguage &lt;chr&gt;, Browser &lt;chr&gt;, Version &lt;chr&gt;,</span>
<span class="co">#&gt; #   `Operating System` &lt;chr&gt;, Resolution &lt;chr&gt;</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Check for rows with durations less than 100 seconds within rows that did not complete the survey</span>
<span class="va">qualtrics_text</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/check_progress.html">check_progress</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/check_duration.html">check_duration</a></span><span class="op">(</span>min_duration <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="co">#&gt; 6 out of 100 rows did not complete the study.</span>
<span class="co">#&gt; 2 out of 6 rows took less time than the minimum duration of 100 seconds.</span>
<span class="co">#&gt; # A tibble: 2 x 16</span>
<span class="co">#&gt; # Rowwise: </span>
<span class="co">#&gt;   StartDate           EndDate             Status IPAddress Progress</span>
<span class="co">#&gt;   &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt; 1 2020-12-17 15:41:52 2020-12-17 15:46:37 IP Ad… 15.223.0…       13</span>
<span class="co">#&gt; 2 2020-12-17 15:41:27 2020-12-17 15:46:45 IP Ad… 19.127.8…       48</span>
<span class="co">#&gt; # … with 11 more variables: `Duration (in seconds)` &lt;dbl&gt;, Finished &lt;lgl&gt;,</span>
<span class="co">#&gt; #   RecordedDate &lt;dttm&gt;, ResponseId &lt;chr&gt;, LocationLatitude &lt;dbl&gt;,</span>
<span class="co">#&gt; #   LocationLongitude &lt;dbl&gt;, UserLanguage &lt;chr&gt;, Browser &lt;chr&gt;, Version &lt;chr&gt;,</span>
<span class="co">#&gt; #   `Operating System` &lt;chr&gt;, Resolution &lt;chr&gt;</span></code></pre></div>
</div>
<div id="marking" class="section level3">
<h3 class="hasAnchor">
<a href="#marking" class="anchor"></a>Marking</h3>
<p>The <code>mark_*()</code> functions output the original data set with a new column specifying rows that meet the exclusion criteria. These can be chained together for multiple exclusion types.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Mark preview and incomplete progress rows</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">qualtrics_text</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/mark_preview.html">mark_preview</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/mark_progress.html">mark_progress</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; 2 out of 100 rows were collected as previews. It is highly recommended to exclude these rows before further checking.</span>
<span class="co">#&gt; 6 out of 100 rows did not complete the study.</span>
<span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="co">#&gt; Rows: 100</span>
<span class="co">#&gt; Columns: 18</span>
<span class="co">#&gt; Rowwise: </span>
<span class="co">#&gt; $ StartDate               &lt;dttm&gt; 2020-12-11 12:06:52, 2020-12-11 12:06:43, 20…</span>
<span class="co">#&gt; $ EndDate                 &lt;dttm&gt; 2020-12-11 12:10:30, 2020-12-11 12:11:27, 20…</span>
<span class="co">#&gt; $ Status                  &lt;chr&gt; "Survey Preview", "Survey Preview", "IP Addre…</span>
<span class="co">#&gt; $ IPAddress               &lt;chr&gt; NA, NA, "73.23.43.0", "16.140.105.0", "107.57…</span>
<span class="co">#&gt; $ Progress                &lt;dbl&gt; 100, 100, 100, 100, 100, 100, 100, 100, 100, …</span>
<span class="co">#&gt; $ `Duration (in seconds)` &lt;dbl&gt; 465, 545, 651, 409, 140, 213, 177, 662, 296, …</span>
<span class="co">#&gt; $ Finished                &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…</span>
<span class="co">#&gt; $ RecordedDate            &lt;dttm&gt; 2020-12-11 12:10:30, 2020-12-11 12:11:27, 20…</span>
<span class="co">#&gt; $ ResponseId              &lt;chr&gt; "R_xLWiuPaNuURSFXY", "R_Q5lqYw6emJQZx2o", "R_…</span>
<span class="co">#&gt; $ LocationLatitude        &lt;dbl&gt; 29.73694, 39.74107, 34.03852, 44.96581, 27.98…</span>
<span class="co">#&gt; $ LocationLongitude       &lt;dbl&gt; -94.97599, -121.82490, -118.25739, -93.07187,…</span>
<span class="co">#&gt; $ UserLanguage            &lt;chr&gt; "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN…</span>
<span class="co">#&gt; $ Browser                 &lt;chr&gt; "Chrome", "Chrome", "Chrome", "Chrome", "Chro…</span>
<span class="co">#&gt; $ Version                 &lt;chr&gt; "88.0.4324.41", "88.0.4324.50", "87.0.4280.88…</span>
<span class="co">#&gt; $ `Operating System`      &lt;chr&gt; "Windows NT 10.0", "Macintosh", "Windows NT 1…</span>
<span class="co">#&gt; $ Resolution              &lt;chr&gt; "1366x768", "1680x1050", "1366x768", "1536x86…</span>
<span class="co">#&gt; $ exclusion_preview       &lt;chr&gt; "preview", "preview", NA, NA, NA, NA, NA, NA,…</span>
<span class="co">#&gt; $ exclusion_progress      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></code></pre></div>
<p>Use the <a href="?collapse_exclusions"><code>collapse_exclusions()</code></a> function to collapse all of the marked columns into a single column.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Collapse labels for preview and incomplete progress rows</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">qualtrics_text</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/mark_preview.html">mark_preview</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/mark_progress.html">mark_progress</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/collapse_exclusions.html">collapse_exclusions</a></span><span class="op">(</span>exclusion_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"preview"</span>, <span class="st">"progress"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; 2 out of 100 rows were collected as previews. It is highly recommended to exclude these rows before further checking.</span>
<span class="co">#&gt; 6 out of 100 rows did not complete the study.</span>
<span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="co">#&gt; Rows: 100</span>
<span class="co">#&gt; Columns: 17</span>
<span class="co">#&gt; $ StartDate               &lt;dttm&gt; 2020-12-11 12:06:52, 2020-12-11 12:06:43, 20…</span>
<span class="co">#&gt; $ EndDate                 &lt;dttm&gt; 2020-12-11 12:10:30, 2020-12-11 12:11:27, 20…</span>
<span class="co">#&gt; $ Status                  &lt;chr&gt; "Survey Preview", "Survey Preview", "IP Addre…</span>
<span class="co">#&gt; $ IPAddress               &lt;chr&gt; NA, NA, "73.23.43.0", "16.140.105.0", "107.57…</span>
<span class="co">#&gt; $ Progress                &lt;dbl&gt; 100, 100, 100, 100, 100, 100, 100, 100, 100, …</span>
<span class="co">#&gt; $ `Duration (in seconds)` &lt;dbl&gt; 465, 545, 651, 409, 140, 213, 177, 662, 296, …</span>
<span class="co">#&gt; $ Finished                &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…</span>
<span class="co">#&gt; $ RecordedDate            &lt;dttm&gt; 2020-12-11 12:10:30, 2020-12-11 12:11:27, 20…</span>
<span class="co">#&gt; $ ResponseId              &lt;chr&gt; "R_xLWiuPaNuURSFXY", "R_Q5lqYw6emJQZx2o", "R_…</span>
<span class="co">#&gt; $ LocationLatitude        &lt;dbl&gt; 29.73694, 39.74107, 34.03852, 44.96581, 27.98…</span>
<span class="co">#&gt; $ LocationLongitude       &lt;dbl&gt; -94.97599, -121.82490, -118.25739, -93.07187,…</span>
<span class="co">#&gt; $ UserLanguage            &lt;chr&gt; "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN…</span>
<span class="co">#&gt; $ Browser                 &lt;chr&gt; "Chrome", "Chrome", "Chrome", "Chrome", "Chro…</span>
<span class="co">#&gt; $ Version                 &lt;chr&gt; "88.0.4324.41", "88.0.4324.50", "87.0.4280.88…</span>
<span class="co">#&gt; $ `Operating System`      &lt;chr&gt; "Windows NT 10.0", "Macintosh", "Windows NT 1…</span>
<span class="co">#&gt; $ Resolution              &lt;chr&gt; "1366x768", "1680x1050", "1366x768", "1536x86…</span>
<span class="co">#&gt; $ exclusions              &lt;chr&gt; "preview", "preview", NA, NA, NA, NA, NA, NA,…</span></code></pre></div>
</div>
<div id="excluding" class="section level3">
<h3 class="hasAnchor">
<a href="#excluding" class="anchor"></a>Excluding</h3>
<p>The <code>exclude_*()</code> functions remove the rows that meet exclusion criteria. These, too, can be piped together. Since the output of each function is a subset of the original data with the excluded rows removed, the order of the functions will influence the reported number of rows meeting the exclusion criteria.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Exclude preview then incomplete progress rows</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">qualtrics_text</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_duration.html">exclude_duration</a></span><span class="op">(</span>min_duration <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_progress.html">exclude_progress</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; 4 out of 100 rows of short and/or long duration were excluded, leaving 96 rows.</span>
<span class="co">#&gt; 4 out of 96 rows with incomplete progress were excluded, leaving 92 rows.</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="co">#&gt; [1] 92 16</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Exclude incomplete progress then preview rows</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">qualtrics_text</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_progress.html">exclude_progress</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_duration.html">exclude_duration</a></span><span class="op">(</span>min_duration <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="co">#&gt; 6 out of 100 rows with incomplete progress were excluded, leaving 94 rows.</span>
<span class="co">#&gt; 2 out of 94 rows of short and/or long duration were excluded, leaving 92 rows.</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="co">#&gt; [1] 92 16</span></code></pre></div>
<p>Though the order of functions should not influence the final data set, it may speed up processing large files by removing preview and incomplete progress data first and waiting to check IP addresses and locations after other exclusions have been performed.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Exclude rows</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">qualtrics_text</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_preview.html">exclude_preview</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_progress.html">exclude_progress</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_duplicates.html">exclude_duplicates</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_duration.html">exclude_duration</a></span><span class="op">(</span>min_duration <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_resolution.html">exclude_resolution</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_ip.html">exclude_ip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_location.html">exclude_location</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; 2 out of 100 preview rows were excluded, leaving 98 rows.</span>
<span class="co">#&gt; 6 out of 98 rows with incomplete progress were excluded, leaving 92 rows.</span>
<span class="co">#&gt; 15 out of 92 duplicate rows were excluded, leaving 83 rows.</span>
<span class="co">#&gt; 2 out of 83 rows of short and/or long duration were excluded, leaving 81 rows.</span>
<span class="co">#&gt; 4 out of 81 rows with unacceptable screen resolution were excluded, leaving 77 rows.</span>
<span class="co">#&gt; 2 out of 77 rows with IP addresses outside of the specified country were excluded, leaving 75 rows.</span>
<span class="co">#&gt; 4 out of 75 rows outside of the US were excluded, leaving 71 rows.</span></code></pre></div>
</div>
<div id="combining-verbs" class="section level3">
<h3 class="hasAnchor">
<a href="#combining-verbs" class="anchor"></a>Combining verbs</h3>
<p>It often makes sense to remove the preview surveys and incomplete surveys before checking other exclusion types.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Exclude preview then incomplete progress rows</span>
<span class="va">qualtrics_text</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_preview.html">exclude_preview</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/exclude_progress.html">exclude_progress</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/check_duplicates.html">check_duplicates</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; 2 out of 100 preview rows were excluded, leaving 98 rows.</span>
<span class="co">#&gt; 6 out of 98 rows with incomplete progress were excluded, leaving 92 rows.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 9 out of 91 rows have duplicate locations.</span>
<span class="co">#&gt; 6 out of 91 rows have duplicate IP addresses.</span>
<span class="co">#&gt; # A tibble: 15 x 17</span>
<span class="co">#&gt;    LocationLatitude LocationLongitu… dupe_count StartDate          </span>
<span class="co">#&gt;               &lt;dbl&gt;            &lt;dbl&gt;      &lt;int&gt; &lt;dttm&gt;             </span>
<span class="co">#&gt;  1             28.6            -81.5          2 2020-12-17 15:42:47</span>
<span class="co">#&gt;  2             28.6            -81.5          2 2020-12-17 15:42:18</span>
<span class="co">#&gt;  3             37.3           -121.           2 2020-12-17 15:46:51</span>
<span class="co">#&gt;  4             37.3           -121.           2 2020-12-17 15:48:53</span>
<span class="co">#&gt;  5             40.3            -75.9          2 2020-12-11 12:41:23</span>
<span class="co">#&gt;  6             40.3            -75.9          2 2020-12-17 15:41:17</span>
<span class="co">#&gt;  7             45.5           -123.           3 2020-12-17 15:40:52</span>
<span class="co">#&gt;  8             45.5           -123.           3 2020-12-17 15:40:57</span>
<span class="co">#&gt;  9             45.5           -123.           3 2020-12-17 15:48:48</span>
<span class="co">#&gt; 10             37.3           -121.           2 2020-12-17 15:46:51</span>
<span class="co">#&gt; 11             37.3           -121.           2 2020-12-17 15:48:53</span>
<span class="co">#&gt; 12             40.3            -75.9          2 2020-12-11 12:41:23</span>
<span class="co">#&gt; 13             40.3            -75.9          2 2020-12-17 15:41:17</span>
<span class="co">#&gt; 14             28.6            -81.5          2 2020-12-17 15:42:47</span>
<span class="co">#&gt; 15             28.6            -81.5          2 2020-12-17 15:42:18</span>
<span class="co">#&gt; # … with 13 more variables: EndDate &lt;dttm&gt;, Status &lt;chr&gt;, IPAddress &lt;chr&gt;,</span>
<span class="co">#&gt; #   Progress &lt;dbl&gt;, `Duration (in seconds)` &lt;dbl&gt;, Finished &lt;lgl&gt;,</span>
<span class="co">#&gt; #   RecordedDate &lt;dttm&gt;, ResponseId &lt;chr&gt;, UserLanguage &lt;chr&gt;, Browser &lt;chr&gt;,</span>
<span class="co">#&gt; #   Version &lt;chr&gt;, `Operating System` &lt;chr&gt;, Resolution &lt;chr&gt;</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/jstevens5/excluder/">https://​github.com/​jstevens5/​excluder/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/jstevens5/excluder/issues">https://​github.com/​jstevens5/​excluder/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jeffrey R. Stevens <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-2375-1360" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Jeffrey R. Stevens.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
